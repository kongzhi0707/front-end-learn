
### 理解前端灰度发布

一：什么是灰度发布？

将某个功能灰度发布（逐渐放量）给特定人群，避免新功能全量上线带来的风险。

上白话文：比如某项目当前处于1.0版本，但是想更新一个1.1版本，1.1版本内测没有问题了，但是由于改动了关键的功能，想要发布上线只给一部分用户来当作使用体验。看看反馈情况。因此线上就需要一部分用户继续使用1.0版本，一部分用户就使用最新的1.1版本。 如果1.1版本接收到的反馈的问题严重影响到线上来，那么我们就需要回退到1.0版本了。那么影响到的用户范围比较小，如果1.1版本比较稳定，那就直接给所有用户过度到1.1版本。实现这种效果，就是灰度发布。

二：什么是灰度规则？

上面我们白话文提到，一部分用户使用最新版的1.1版本，另外一部分用户还是使用1.0版本的，那么它是根据什么规则来判断这部分用户呢？ 也就是说 灰度规则是怎么定义的？ 我们可以根据用户的等级，性别，地区，客户端等业务信息或设备信息来划分。 比如灰度规则 设定为 杭州地区的用户访问 1.1版本，那么杭州用户访问网站的时候就算命中灰度规则来。那么其他地区的用户还是使用1.0版本功能。

三：灰度发布的优点？

1）提前收集用户的使用意见，及时完善产品功能。
2）控制未知异常只出现在小范围内，不影响大多数用户。
3）发现产品是否存在外在问题(如合规)，可及时回滚到旧版本。

四：灰度实现的原理？

如下图所示：

<img src="https://raw.githubusercontent.com/kongzhi0707/front-end-learn/master/images2/gray/1.png" />



